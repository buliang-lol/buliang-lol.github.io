const links = document.querySelectorAll('a.nav-link');
    
    // 为每个链接添加点击事件
    links.forEach(link => {
        link.addEventListener('click', function(e) {
            // 获取A标签的href属性值
            const targetUrl = this.href;
            
            // 阻止A标签默认的跳转行为
            e.preventDefault();
            
            // 使用随机窗口名称防止被浏览器阻止
            const randomName = 'win_' + Math.random().toString(36).substring(2, 15);
            
            // 在新窗口中打开指定的URL
            window.open(targetUrl, randomName);
            
            console.log('在新窗口打开:', targetUrl);
        });
    });

document.addEventListener('DOMContentLoaded', function() {
    // 为所有链接添加点击事件监听器
    const links = document.querySelectorAll('a.nav-link[data-id]');
    
    links.forEach(link => {
        link.addEventListener('click', function(e) {
            const linkId = this.getAttribute('data-id');
            
            // 使用sendBeacon方法发送统计请求（即使页面跳转也能保证请求发送）
            const data = new FormData();
            data.append('id', linkId);
            
            if (navigator.sendBeacon) {
                navigator.sendBeacon('track.php', data);
            } else {
                // 不支持sendBeacon时使用fetch+keepalive
                fetch('track.php', {
                    method: 'POST',
                    body: data,
                    keepalive: true // 确保在页面跳转后请求能完成
                });
            }
        });
    });
});
